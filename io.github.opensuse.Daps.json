{
    "app-id": "io.github.opensuse.Daps",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "23.08",
    "sdk": "org.freedesktop.Sdk",
    "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.openjdk"
    ],
    "command": "daps",
    "cleanup": [
        "build-dir"
    ],
    "build-options": {
        "append-path": "/app/jre/bin"
    },
    "modules": [
        {
            "name": "openjdk",
            "buildsystem": "simple",
            "build-commands": [
                "/usr/lib/sdk/openjdk/install.sh"
            ]
        },
        {
            "name": "python3-lxml",
            "disabled": true,
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"lxml\" --no-build-isolation"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/30/39/7305428d1c4f28282a4f5bdbef24e0f905d351f34cf351ceb131f5cddf78/lxml-4.9.3.tar.gz",
                    "sha256": "48628bd53a426c9eb9bc066a923acaa0878d1e86129fd5359aee99285f4eed9c"
                }
            ]
        },
        {
            "name": "imagemagick",
            "disabled": true,
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ImageMagick/ImageMagick/archive/refs/tags/7.1.1-20.tar.gz",
                    "sha256": "8e2a0b5feaa6a8004b7d611e46984eb2217eeaff8347c5642e6ce84ecaf16446"
                }
            ]
        },
        {
            "name": "jing-trang",
            "buildsystem": "simple",
            "build-commands": [
                "export JAVA_HOME=/app/jre && ./ant",
                "install -D build/jing.jar /app/lib/jing-trang/jing.jar",
                "install -D build/trang.jar /app/lib/jing-trang/trang.jar",
                "echo $PATH"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/relaxng/jing-trang.git",
                    "branch": "master"
                }
            ]
        },
        {
            "name": "poppler",
            "disabled": true,
            "buildsystem": "cmake",
            "sources": [
                {
                    "type": "git",
                    "url": "https://gitlab.freedesktop.org/poppler/poppler.git",
                    "branch": "master"
                }
            ]
        },
        {
            "name": "daps",
            "disabled": true,
            "buildsystem": "autotools",
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/openSUSE/daps.git",
                    "branch": "main"
                }
            ]
        },
        {
            "name": "daps",
            "buildsystem": "simple",
            "build-commands": [
                "install -D daps /app/bin/daps"
            ],
            "sources": [
                {
                    "type": "file",
                    "path": "daps"
                }
            ]
        }
    ]
}