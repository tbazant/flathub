app-id: io.github.opensuse.Daps
runtime: org.freedesktop.Platform
runtime-version: '23.08'
add-build-extensions:
  - org.inkscape.Inkscape
sdk: org.freedesktop.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.openjdk
command: daps
cleanup:
  - build-dir

modules:
  - name : openjdk
    buildsystem: simple
    build-commands: 
      - /usr/lib/sdk/openjdk/install.sh
  - python3-lxml.json
  # - name: imagemagick
  #   sources:
  #     - type: archive
  #       url: https://github.com/ImageMagick/ImageMagick/archive/refs/tags/7.1.1-20.tar.gz
  #       sha25: 8e2a0b5feaa6a8004b7d611e46984eb2217eeaff8347c5642e6ce84ecaf16446
  - name: jing-trang
    buildsystem: simple
    build-commands:
      - export JAVA_HOME=/app/jre && ./ant
      - cp -p build/jing.jar /app/lib/jing.jar
      - cp -p build/trang.jar /app/lib/trang.jar
    sources:
      - type: git
        url: https://github.com/relaxng/jing-trang.git
        branch: master
  # - name: poppler
  #   buildsystem: cmake
  #   sources:
  #     - type: git
  #       url: https://gitlab.freedesktop.org/poppler/poppler.git
  #       branch: master
  # - name: daps
  #   buildsystem: autotools
  #   sources:
  #     - type: git
  #       url: https://github.com/openSUSE/daps.git
  #       branch: main
  - name: daps
    buildsystem: simple
    build-commands:
      - install -D daps /app/bin/daps
    sources:
      - type: file
        path: daps